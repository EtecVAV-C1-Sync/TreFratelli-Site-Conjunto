<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="titulo">Tre Fratelli - Storia</title>
    <link rel="icon" href="imagens/Logo Completa.png" type="icon">
    <link rel="stylesheet" href="style.css">
    <script src="app.js" defer></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.3.2/css/flag-icons.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/fill/style.css">

</head>

<body>

    <!-- INTESTAZIONE -->
    <header>
        <div class="language-selector">
            <button class="lang-btn" id="btn_1" onclick="toggleDropdown()">
      <span id="flag"></span>
      <span id="langName">It</span>
      <i class="ph-fill ph-triangle" id="lang-arrow"></i>
    </button>
            <div class="lang-dropdown" id="langMenu">
                <button onclick="setLanguage('it')" id="btn_2"><span class="fi fi-it"></span> It</button>
                <button onclick="setLanguage('en_uk')" id="btn_3"><span class="fi fi-gb"></span> En-Uk</button>
                <button onclick="setLanguage('pt_br')" id="btn_4"><span class="fi fi-br"></span> Pt-Br</button>
            </div>
        </div>
        <div class="header-icons">
            <button class="navegacao-btn">
      <i class="ph-fill ph-hourglass-low"></i>
    </button>
            <div class="top-menu-icons">
                <div class="big-circle"></div>
                <a href="Storia.html" class="menu-item"><i class="ph-fill ph-hourglass-low branco"></i></a>
                <a href="AttrazioniTuristiche.html" class="menu-item"><i class="ph-fill ph-map-pin"></i></a>
                <a href="index.html" class="menu-item"><i class="ph-fill ph-house"></i></a>
                <a href="vini.html" class="menu-item"><i class="ph-fill ph-wine"></i></a>
                <a href="Cardapio.html" class="menu-item"><i class="ph-fill ph-fork-knife"></i></a>
                <a href="chatbot.html" class="menu-item"><i class="ph-fill ph-robot"></i></a>
            </div>
        </div>
        <div class="sup-direita">
            <img src="imagens/Logo Completa.png" alt="Tre Fratelli" class="logo" />
            <div class="texto-ao-lado">
                <p>Tre Fratelli</p>
            </div>
        </div>
    </header>


    <!-- ========================= SEZIONE: STORIA ========================= -->
    <section id="storia" class="storia-section">

        <!-- Título -->
        <h1 id="h1_1" class="storia-title" style="margin-left: 250px; margin-top: 40px !important; color: white">La nostra storia e il tuo piacere.</h1>

        <!-- ========================= LINEA DEL TEMPO ========================= -->
        <div class="timeline">

            <svg class="timeline-path" viewBox="0 0 100 100" preserveAspectRatio="none">
        <path
            d="M 10 30 C 20 10, 20 80, 30 75 S 40 100, 60 15 C 70 -5, 80 80, 90 60"
            stroke="#5d3a24"
            fill="none"
            stroke-width="0.7"
            stroke-dasharray="1.5, 1.5"
            stroke-linecap="round"
        />
    </svg>

            <button class="timeline-pin" data-target="item1">
        <img src="imagens/Mapa.png" alt="Pin">
        <h3 id="h3_1">I. Le Origini e la prima crisi</h3>
    </button>
            <button class="timeline-pin" data-target="item2">
        <img src="imagens/Mapa.png" alt="Pin">
        <h3 id="h3_2">II. Il ritorno alla crescita e la seconda crisi</h3>
    </button>
            <button class="timeline-pin" data-target="item3">
        <img src="imagens/Mapa.png" alt="Pin">
        <h3 id="h3_3">III. Ritorno dovuto al turismo e alla migrazione giovanile</h3>
    </button>
            <button class="timeline-pin" data-target="item4">
        <img src="imagens/Mapa.png" alt="Pin">
        <h3 id="h3_4">IV. Tra Tradizione e ispirazione creativa</h3>
    </button>

            <div id="content-container">
                <div id="item1" class="timeline-content" style="margin-left: -60px;">
                    <img class="timeline-image" src="imagens/storia.jpg" alt="Origini foto">
                    <p id="p_1" class="timeline-text">
                        La Cantina e Ristorante Tre Fratelli aprì ufficialmente nel 1925, ma la vita non fu mai facile. Nel 1930, rischiò di chiudere a causa della crisi economica e dei debiti che aumentarono.
                    </p>
                </div>
                <div id="item2" class="timeline-content" style="margin-left: -10px;">
                    <img class="timeline-image" src="imagens/storia4.jpg" alt="Crescita foto">
                    <p id="p_2" class="timeline-text">
                        Per salvare il posto, la madre dei fratelli, Teresa, aprì una piccola cucina rustica per servire i viaggiatori della ferrovia di Tirano, combinando vino e cibo locale. Grazie a questo, riuscirono a mantenere la proprietà. Quando finalmente iniziarono
                        a realizzare un piccolo profitto, scoppiò la Seconda Guerra Mondiale, che fu un duro colpo, sia per l' azienda che per la famiglia.
                    </p>
                </div>
                <div id="item3" class="timeline-content" style="margin-left: -8px;">
                    <img class="timeline-image" src="imagens/storia2.jpg" alt="Turismo foto">
                    <p id="p_3" class="timeline-text">
                        Negli anni '60 e '70, con il boom turistico nelle Alpi, vissero una nuova fase, raccogliendo i frutti della pazienza e della perseverança. Fu un periodo molto positivo. — Ma durante a crise degli anni '80, il ristorante rischiò di chiudere di nuovo a
                        causa della concorrenza e dell'emigrazione dei giovani.
                    </p>
                </div>
                <div id="item4" class="timeline-content">
                    <img class="timeline-image" src="imagens/storia3.jpg" alt="Tradizione foto">
                    <p id="p_4" class="timeline-text">
                        Fu allora che uno dei pronipoti, Alessandro, laureato in enologia a Milano, portò nuove idee, unindo tradizione e innovazione. Quest'anno compie 100 anni ed è stata acquistata dalla famiglia Zanarelli, che promette di ristrutturare il ristorante.
                    </p>
                </div>
            </div>
        </div>

        <style>
            body {
                background-image: url("imagens/Fundostoria.jpeg");
                background-size: cover;
                background-position: center;
            }
            
            :root {
                /* VARIABILE DI SCALA */
              
                --timeline-max-width: 1300px;
                /* COLORI  */
                --pin-color: #c95143;
                --text-color: black;
                --path-color: #5d3a24;
                --pin-max-size: 3500px;
                
            }
            /* ========================================= */
            /* 1. CONTENITORE TIMELINE (.timeline) */
            /* ========================================= */
            
            .timeline {
                position: relative;
                max-width: var(--timeline-max-width);
                height: calc(var(--timeline-max-width) * 0.6);
                margin: 5vh auto;
               
            }
            /* ========================================= */
            /* 2. MARCADORES (PINS) */
            /* ========================================= */
            
            .timeline-pin {
                position: absolute;
                /* STILI DI BASE DEL PULSANTE/MARCATORE*/
                background: transparent;
                border: none;
                cursor: pointer;
                text-align: center;
                width: 25%;
                /* LARGHEZZA RELATIVA DELL'ELEMENTO COMPLETO */
                padding: 0;
                z-index: 10;
            }
            /* 4. POSIZIONAMENTO SPECIFICO DI OGNI PIN (UTILIZZANDO PERCENTUALI) */
            
            .timeline-pin[data-target="item1"] {
                
                top: 18%;
                left: 5%;
                transform: translateX(-50%);
            }
            
            .timeline-pin[data-target="item2"] {
               
                top: 50%;
                left: 33%;
                transform: translateX(-50%);
            }
            
            .timeline-pin[data-target="item3"] {
               
                top: 0%;
                left: 61.3%;
                transform: translateX(-50%);
            }
            
            .timeline-pin[data-target="item4"] {
               
                top: 40%;
                left: 85%;
                transform: translateX(-50%);
            }
            /* ========================================= */
            /* 3. STILI INTERNI DEI PIN */
            /* ========================================= */
            /*  STILIZZAZIONE DELL'IMMAGINE DEL PIN */
            
            .timeline-pin img {
                width: 100%;
                /* L'IMMAGINE RIEMPIE LA LARGHEZZA DEL CONTENITORE .timeline-pin */
                max-width: var(--pin-max-size);
          
                height: auto;
                display: block;
                margin: 0 auto 5px;
              
            }
            /* 6. STILIZZAZIONE DELL'TESTO*/
            
            .timeline-pin h3 {
                font-size: 1.2vw;
                /* DIMENSIONE DEL CARATTERE RELATIVA ALLA LARGHEZZA DELLA VIEWPORT (VW) */
                line-height: 1.2;
                color: var(--text-color);
                font-family: serif;
                font-weight: normal;
                text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.7);
                font-weight: bold;
            }
            /* ========================================= */
            /* 4. STILE DEL PERCORSO SVG (NUOVO E CORRETTO) */
            /* ========================================= */
            /* 7. ESTILE DEL CONTENITORE SVG*/
            
            .timeline svg {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: 1;
                pointer-events: none;
                /* GARANTISCE CHE L'SVG NON BLOCCI IL CLIC SUI PIN */
            }
            /* 8. STILE DEL PERCORSO (LA LINEA DISEGnata) */
            
            .timeline svg path {
                stroke: var(--path-color);
                
                fill: none;
              
                stroke-width: 0.5;
                /* SPESSORE DEL TRATTO */
                stroke-dasharray: 1, 1;
                /* CREA L'EFFETTO TRATTEGGIATO (1.5 DI TRATTO, 1.5 DI SPAZIO) */
                stroke-linecap: round;
                /* RENDE LE ESTREMITÀ DEI TRATTI ARROTONDATE */
            }
            
          .timeline-content {
    display: none;
    /* CONFIGURAZIONE PER IL CONTENITORE DELLA DESCRIZIONE */
    position: absolute;
    /* Z-INDEX ALTO PER GARANTIRE CHE APPAIA SOPRA LA TIMELINE */
    z-index: 100;
    /* STILI VISIVI DEL POP-UP */
    background-color: #f7f3e8;
    /* COLORE DI SFONDO CHIARO PER CONTRASTO */
    border: 2px solid var(--text-color);
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    /* DEFINISCE LA LARGHEZZA MASSIMA DEL POP-UP PER NON OCCUPARE L'INTERA SCHERMATA */
    width: 300px;
    height: 450px;
    max-width: 90vw;
    /* RESPONSIVITÀ SU SCHERMI PICCOLI */
}
/* STILE PER QUANDO LA DESCRIZIONE È ATTIVA */
            .timeline-content.active {
                display: block;
            }
            
            .timeline-content .timeline-image {
                width: 100%;
                height: auto;
                border-radius: 8px;
                margin-bottom: 10px;
            }
            
            .timeline-content .timeline-text {
                color: var(--text-color);
                font-size: 14px;
                text-align: left;
                line-height: 1.4;
            }
        </style>

        <!-- ========================= CONTENUTI ========================= -->

        
        <div id="item1" class="timeline-content">
            <img class="timeline-image" src="imagens/storia.jpg" alt="Origini foto">
            <p id="p_1" class="timeline-text">
                La Cantina e Ristorante Tre Fratelli aprì ufficialmente nel 1925, ma la vita non fu mai facile. Nel 1930, rischiò di chiudere a causa della crisi economica e dei debiti che aumentarono.
            </p>
        </div>

        <div id="item2" class="timeline-content">
            <img class="timeline-image" src="imagens/storia4.jpg" alt="Crescita foto">
            <p id="p_2" class="timeline-text">
                Per salvare il posto, la madre dei fratelli, Teresa, aprì una piccola cucina rustica per servire i viaggiatori della ferrovia di Tirano, combinando vino e cibo locale. Grazie a questo, riuscirono a mantenere la proprietà. Quando finalmente iniziarono
                a realizzare un piccolo profitto, scoppiò la Seconda Guerra Mondiale, che fu un duro colpo, sia per l' azienda che per la famiglia.
            </p>
        </div>

        <div id="item3" class="timeline-content">
            <img class="timeline-image" src="imagens/storia2.jpg" alt="Turismo foto">
            <p id="p_3" class="timeline-text">
                Negli anni '60 e '70, con il boom turistico nelle Alpi, vissero una nuova fase, raccogliendo i frutti della pazienza e della perseveranza. Fu un periodo molto positivo. — Ma durante la crisi degli anni '80, il ristorante rischiò di chiudere di nuovo a
                causa della concorrenza e dell'emigrazione dei giovani.
            </p>
        </div>

 
        <div id="item4" class="timeline-content">
            <img class="timeline-image" src="imagens/storia3.jpg" alt="Tradizione foto">
            <p id="p_4" class="timeline-text">
                Fu allora che uno dei pronipoti, Alessandro, laureato in enologia a Milano, portò nuove idee, unendo tradizione e innovazione. Quest'anno compie 100 anni ed è stata acquistata dalla famiglia Zanarelli, che promette di ristrutturare il ristorante.
            </p>
        </div>

    </section>
    <footer class="site-footer" style="margin-top: 500px;">
        <div class="footer-bottom">
            &copy; 2025 Tre Fratelli. Todos os direitos reservados.
        </div>
    </footer>
</body>

<script>
    const i18n = {
        it: {
            titulo: "Tre Fratelli - Storia",
            flag: "<span class='fi fi-it'></span>",
            langName: "It",
            btn_2: "<span class='fi fi-it'></span> It",
            btn_3: "<span class='fi fi-gb'></span> En-Uk",
            btn_4: "<span class='fi fi-br'></span> Pt-Br",
            h1_1: "La nostra storia e il tuo piacere.",
            h3_1: "I. Le Origini e la prima crisi",
            h3_2: "II. Il ritorno alla crescita e la seconda crisi",
            h3_3: "III. Ritorno dovuto al turismo e alla migrazione giovanile",
            h3_4: "IV. Tra Tradizione e ispirazione creativa",
            p_1: "La Cantina e Ristorante Tre Fratelli aprì ufficialmente nel 1925, ma la vita non fu mai facile. Nel 1930, rischiò di chiudere a causa della crisi economica e dei debiti che aumentarono.",
            p_2: "Per salvare il posto, la madre dei fratelli, Teresa, aprì una piccola cucina rustica per servire i viaggiatori della ferrovia di Tirano, combinando vino e cibo locale. Grazie a questo, riuscirono a mantenere la proprietà. Quando finalmente iniziarono a realizzare un piccolo profitto, scoppiò la Seconda Guerra Mondiale, che fu un duro colpo, sia per l'azienda che per la famiglia.",
            p_3: "Negli anni '60 e '70, con il boom turistico nelle Alpi, vissero una nuova fase, raccogliendo i frutti della pazienza e della perseveranza. Fu un periodo molto positivo. — Ma durante la crisi degli anni '80, il ristorante rischiò di chiudere di nuovo a causa della concorrenza e dell'emigrazione dei giovani.",
            p_4: "Fu allora che uno dei pronipoti, Alessandro, laureato in enologia a Milano, portò nuove idee, unendo tradizione e innovazione. Quest'anno compie 100 anni ed è stata acquistata dalla famiglia Zanarelli, che promette di ristrutturare il ristorante."
        },

        en_uk: {
            titulo: "Tre Fratelli Winery and Restaurant - History",
            flag: "<span class='fi fi-gb'></span>",
            langName: "En-Uk",
            btn_2: "<span class='fi fi-it'></span> It",
            btn_3: "<span class='fi fi-gb'></span> En-Uk",
            btn_4: "<span class='fi fi-br'></span> Pt-Br",
            h1_1: "Our history and your pleasure.",
            h3_1: "I. Origins and the first crisis",
            h3_2: "II. Return to growth and the second crisis",
            h3_3: "III. Tourism boom and youth migration",
            h3_4: "IV. Between tradition and creative inspiration",
            p_1: "The Tre Fratelli Winery and Restaurant officially opened in 1925, but life was never easy. In 1930, it almost closed due to the economic crisis and increasing debts.",
            p_2: "To save the business, the brothers' mother, Teresa, opened a small rustic kitchen to serve travelers from the Tirano railway, combining wine and local food. Thanks to this, they managed to keep the property. When they finally began making a small profit, the Second World War broke out, which was a severe blow to both the company and the family.",
            p_3: "In the 1960s and 70s, with the tourist boom in the Alps, they experienced a new phase, reaping the fruits of patience and perseverance. It was a very positive period — but during the crisis of the 1980s, the restaurant risked closing again due to competition and youth emigration.",
            p_4: "It was then that one of the great-grandchildren, Alessandro, graduated in oenology in Milan, brought new ideas, combining tradition and innovation. This year marks 100 years, and it was acquired by the Zanarelli family, who promise to renovate the restaurant."
        },

        pt_br: {
            titulo: "Vinícola e Restaurante Tre Fratelli - História",
            flag: "<span class='fi fi-br'></span>",
            langName: "Pt-Br",
            btn_2: "<span class='fi fi-it'></span> It",
            btn_3: "<span class='fi fi-gb'></span> En-Uk",
            btn_4: "<span class='fi fi-br'></span> Pt-Br",
            h1_1: "Nossa história e seu prazer.",
            h3_1: "I. Origens e a primeira crise",
            h3_2: "II. Retorno ao crescimento e a segunda crise",
            h3_3: "III. Boom do turismo e migração dos jovens",
            h3_4: "IV. Entre tradição e inspiração criativa",
            p_1: "A Vinícola e Restaurante Tre Fratelli abriu oficialmente em 1925, mas a vida nunca foi fácil. Em 1930, quase fechou devido à crise econômica e ao aumento das dívidas.",
            p_2: "Para salvar o negócio, a mãe dos irmãos, Teresa, abriu uma pequena cozinha rústica para atender os viajantes da ferrovia de Tirano, combinando vinho e comida local. Graças a isso, conseguiram manter a propriedade. Quando finalmente começaram a ter um pequeno lucro, eclodiu a Segunda Guerra Mundial, que foi um duro golpe tanto para a empresa quanto para a família.",
            p_3: "Nos anos 60 e 70, com o boom turístico nos Alpes, viveram uma nova fase, colhendo os frutos da paciência e perseverança. Foi um período muito positivo — mas durante a crise dos anos 80, o restaurante correu risco de fechar novamente devido à concorrência e à emigração dos jovens.",
            p_4: "Foi então que um dos bisnetos, Alessandro, formado em enologia em Milão, trouxe novas ideias, unindo tradição e inovação. Este ano completa 100 anos, e foi adquirido pela família Zanarelli, que promete reformar o restaurante."
        }
    };

    function setLanguage(lang) {
        const elements = document.querySelectorAll('[id]');
        const translations = i18n[lang];

        elements.forEach(el => {
            const key = el.id;
            if (translations[key]) {
                if (/<\/?[a-z][\s\S]*>/i.test(translations[key])) {
                    el.innerHTML = translations[key];
                } else {
                    el.textContent = translations[key];
                }
            }
        });

        localStorage.setItem('lang', lang);
    }

    document.addEventListener('DOMContentLoaded', () => {
        const savedLang = localStorage.getItem('lang') || 'it';
        setLanguage(savedLang);
    });

    document.addEventListener('DOMContentLoaded', function() {
        const pins = document.querySelectorAll('.timeline-pin');
        // Mantenha esta variável sincronizada com o CSS
        const DESCRIPTION_WIDTH = 300;

        // NOTA: LE VARIABILI 'activeContent' E 'activePin' SONO STATE RIMOSSE, 
        // PERCHÉ LA NUOVA LOGICA PERMETTE PIÙ CONTENUTI ATTIVI SIMULTANEAMENTE.

       pins.forEach(pin => {
    pin.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('data-target');
        const targetContent = document.getElementById(targetId);

        // =========================================================
        //  PARAMETRI DI REGOLAZIONE DELLA POSIZIONE (PERSONALIZZAZIONE)
        //  I TUOI VALORI DI TEST: X_OFFSET = -100, Y_SPACING = -110
        // =========================================================
        //  USA QUESTI PER REGOLARE LA POSIZIONE ORIZZONTALE E VERTICALE
        const X_OFFSET = -100;
        const Y_SPACING = -110;
        // =========================================================

        // 1. LOGICA DI ALTERNANZA (MOSTRARE / NASCONDERE)
        // SE IL CONTENUTO DI DESTINAZIONE È GIÀ VISIBILE (HA LA CLASSE 'active'), NASCONDILO E INTERROMPI.
        // QUESTA È LA NUOVA LOGICA PER "CHIUDERE CLICCANDO SULLA STESSA FRECCIA".
        if (targetContent.classList.contains('active')) {
            targetContent.classList.remove('active');
            return;
        }

        // IL PASSO 2 (NASCONDERE IL CONTENUTO PRECEDENTE) È STATO RIMOSSO INTENZIONALMENTE
        // PER PERMETTERE CHE ALTRE DESCRIZIONI RIMANGANO APERTE.

        // 2. POSIZIONA IL CONTENUTO
        const pinRect = this.getBoundingClientRect();
        const scrollY = window.scrollY || window.pageYOffset;

        // CALCOLO PER LA CENTRALIZZAZIONE ORIZZONTALE: (CENTRO DEL PIN) - (METÀ DELLA LARGHEZZA DELLA DESCRIZIONE) + (REGOLAZIONE)
        const pinCenterHorizontal = pinRect.left + (pinRect.width / 2);
        let contentLeft = pinCenterHorizontal - (DESCRIPTION_WIDTH / 2) + X_OFFSET;

        // TRATTAMENTO DEI BORDI (RESPONSIVITÀ: EVITA CHE IL POP-UP ESCA DALLO SCHERMO)
        if (contentLeft < 5) {
            contentLeft = 5;
        }
        if (contentLeft + DESCRIPTION_WIDTH > window.innerWidth - 5) {
            contentLeft = window.innerWidth - DESCRIPTION_WIDTH - 5;
        }

        // POSIZIONE VERTICALE (Y): USA Y_SPACING
        const contentTop = pinRect.bottom + scrollY + Y_SPACING;

        // APPLICA LE POSIZIONI
        targetContent.style.top = `${contentTop}px`;
        targetContent.style.left = `${contentLeft}px`;

        // 3. MOSTRA IL NUOVO CONTENUTO
        targetContent.classList.add('active');

        // NOTA: LE RIGHE PER AGGIORNARE LO STATO ATTIVO (activeContent = targetContent; activePin = this;)
        // SONO STATE RIMOSSE, PERCHÉ NON È NECESSARIO TRACCIARE UN UNICO STATO ATTIVO.
    });
});

// OPZIONALE: NASCONDERE TUTTE LE DESCRIZIONI QUANDO SI CLICCA ALL'ESTERNO
// QUESTA FUNZIONE È STATA MODIFICATA PER CERCARE TUTTI I CONTENUTI ATTIVI E CHIUDERLI.
document.addEventListener('click', function(e) {

    // SELEZIONA TUTTI I CONTENUTI CHE SONO ATTUALMENTE APERTI
    const activeContents = document.querySelectorAll('.timeline-content.active');

    // VERIFICA SE IL CLICK NON È SU UN PIN E NEMMENO SU UN CONTENUTO ATTIVO
    if (!e.target.closest('.timeline-pin') && !e.target.closest('.timeline-content')) {
        activeContents.forEach(content => {
            content.classList.remove('active');
        });
    }
});
});
</script>

</html>